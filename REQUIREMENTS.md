# 長距離練習日誌アプリ 要件メモ（暫定）

## 目的
- 選手個人が長距離練習の「負荷」を継続的に記録し、振り返りと漸進性（成長/積み上げ）を可視化する。
- 予定したメニューを遂行できたか（計画と実績）を管理できるようにする。

## 想定ユーザー / スコープ
- 想定ユーザー: 選手個人（チーム連携は後回し）。
- まずは入力の手間を最小化し、継続できるUIを優先。

## コア概念
- 負荷は「強度 × 量」を中心に扱う。
- 強度指標は複数併用（絶対強度・相対強度・主観強度を並列で保持）。
- レストは「成長指標として保存」するが、負荷計算ではデフォルト除外。

## 記録するデータ（MVP）
- セッション（実績）
  - 日付
  - メニュー本体（テンプレ）※インターバルは当面テンプレ入力のみ
  - 量: 走行距離（メニュー本体を基本）
  - 強度:
    - ペース（秒/km）: 絶対強度
    - ペース帯/ゾーン（例: E/M/T/I/R）: 相対強度（PB由来の推定を活用）
    - RPE: 絵文字スライドで選択（数値は内部マッピング）
  - レスト:
    - レスト時間（必須に近い）
    - レスト距離（ジョグで繋ぐ場合のみ任意）
    - レスト種別（停止/ジョグ）
  - メモ（任意）
- パーソナルベスト（複数入力可能）
  - 種目: 800 / 1500 / 3000 / 3000SC / 5000 / 10000 / ハーフ / フル
  - 記録（任意で日付・メモ）

## 計画（Plan）と実績（Session）の分離
- 予定メニューは事前に立て、当日は「できたか」を入力できる必要がある。
- Plan: 日付、テンプレ（狙い/目標ペースは後で）、メモ
- Session: Planに紐付く実績（未実施/完了/一部/中止などの状態も持つ）
- 予定なし実績も許容（運用上の抜けを吸収）

## 入力UI方針（重要）
- ペース入力の負担を下げる
  - `4:30/km`が直感的だが、分・秒の別入力は避ける
  - 1フィールドで受ける（例: `430`→`4:30/km`、`4:30`も許容）
  - PBから推定したペース帯を「選ぶだけ」で初期値入力（微調整は±秒ボタン/スライダ）
- RPEは絵文字スライドで「ここらへん」をタップする方式（厳密な数値入力を要求しない）

## カレンダーUI
- カレンダーは「メニュー本体」を大きく表示。
- 色分け（濃淡）は「負荷の大きさ」で表現。
- 総距離は負荷とは切り離し、週末/週末尾に軽い統計として表示する程度でよい。

## 分析・フィードバック（MVPで狙う）
- 練習距離（主にメニュー本体）、強度、負荷量、漸進性の可視化
- 例: 週負荷、移動平均、強度分布（ゾーン回数/比率）
- レストの成長指標
  - 同一テンプレで「レスト短縮」「停止→ジョグ化」「レスト密度」など

## 負荷計算（暫定方針）
- 複数の負荷算出を並列で保持し、入力できるデータに応じて算出可能なものを使う。
- デフォルト: レストは負荷計算から除外（ただし保存は必須）。
- 濃淡のスケール:
  - 個人の能力（キャパ）に対する相対値が理想
  - 当面は「直近の負荷推移」から能力を推定（例: 42日EWMAなど）
  - 具体式・閾値は運用しながら後で決める

## 未決事項（運用で確定）
- 1日の代表負荷を何で決めるか（ペース由来 vs RPE由来の優先順位）
- PB複数時にどのPB/どの期間を基準にするか（重み付け、直近優先など）
- WU/CD（ウォームアップ/クールダウン）の扱い
  - メニュー本体中心の運用は維持しつつ、任意で記録できる形が候補

